var e,t;function a(e){const{target:t}=e,a=t.dataset.action||!1;a&&n(a)}function n(e){switch(DEV_MODE&&console.info(e),e){case"Open Panel Info":l.pause(),o.closeAllPanels(),o.open(o.panelInfo);break;case"Abrir Panel Slider":l.play(),o.closeAllPanels(),o.open(o.panelSlider),i();break;case"Open Panel Gallery":l.pause(),o.closeAllPanels(),o.open(o.panelGallery);break;case"Open Image Options":l.pause(),o.open(o.panelImageOptions);break;case"Close Image Options":o.close(o.panelImageOptions),l.play();break;case"Próxima imágen":l.forward();break;case"Imágen previa":l.backward();break;case"Saltar a imágen":const e=Number(event.target.dataset.image);n("Abrir Panel Slider"),l.changeImage(e),l.play();break;case"Continuar la reproducción":n("Close Image Options"),l.play();break;case"Pausar la reproducción":l.pause();break;case"Compartir en Facebook":s("Facebook"),n("Close Image Options");break;case"Compartir en Whatsapp":s("WhatsApp"),n("Close Image Options");break;case"Descargar Imágen":!function(e){try{const t=document.createElement("a");t.href=e,t.download=`${r.album.evento} - ${r.album.slider.actual}`,t.setAttribute("target","_blank"),console.log(t),document.body.appendChild(t),t.click(),t.remove()}catch(e){}}(r.album.image_src+r.album.slider.actual+r.album.cfgImgType),n("Close Image Options");break;case"Cambiar a Pantalla Completa":i(),n("Close Image Options")}}(e=window.document).getElementById("livereloadscript")||((t=e.createElement("script")).async=1,t.src="//"+(window.location.host||"localhost").split(":")[0]+":35730/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t)),document.addEventListener("DOMContentLoaded",(function(){DEV_MODE&&console.warn("Running in DEV Mode");document.addEventListener("mouseup",a),r.initAlbum()}));const l={container:document.getElementById("slider-image"),intervalID:null,timerStart(){const{rate:e}=r.album.slider;r.album.slider.status=!0,this.intervalID=setInterval((()=>{this.forward()}),e)},timerPause(){for(var e=1;e<=this.intervalID;e++)clearInterval(e)},play(){this.timerStart()},pause(){this.timerPause()},toggle(){console.log(arguments.callee.name)},forward(){let e=r.album.slider.actual;const t=r.album.cantidadFotos;next=e<t?e+1:1,this.changeImage(next)},backward(){let e=r.album.slider.actual;const t=r.album.cantidadFotos;next=1===e?t:e-1,this.changeImage(next)},changeImage(e){const{image_src:t,cfgImgType:a}=r.album,n=t+e+a;r.album.slider.actual=e,DEV_MODE&&console.info(n),this.container.setAttribute("src",n)}},o={panelInfo:document.querySelector(".panel-info"),panelSlider:document.querySelector(".panel-slider"),panelImageOptions:document.querySelector(".panel-slider__options"),panelGallery:document.querySelector(".panel-gallery"),switchTo(e){this.closeAllPanels(),this.open(e)},open(e){e.classList.add("active")},close(e){e.classList.remove("active")},closeAllPanels(){this.panelInfo.classList.remove("active"),this.panelSlider.classList.remove("active"),this.panelGallery.classList.remove("active")}},r={album:{},async initAlbum(){try{const e="../site/database/database.json",t=await fetch(e);if(!t.ok)throw Error("No se puede cargar la bases de datos desde: "+e);const a=await t.json();albumId=this.getAlbumId();const n=a.albumes[albumId]||!1;if(!n||!n.autor)throw Error(`No existe el Album ${albumId}`);const l=a.autores[n.autor];if(!l.nombre)throw Error(`No existe el Autor ${n.autor}`);if(!n.activo)throw Error("El álbum solicitado está inactivo, por favor contáctese al teléfono +54 381 5900868");n.autor=l,n.image_src=n.cfgAlbumUrl+n.cfgImgUrl,n.cover||(n.cover=`${n.image_src}3${n.cfgImgType}`),n.slider={rate:n.cfgSliderTimer,actual:1,vistas:0,status:!1},this.album=n,this.fillImageGallery(),this.fillInfoPanel(),this.loadBackgroundImage(),DEV_MODE&&console.info("Loading Album",n)}catch(e){return this.showErrorMessage(String(e).replace("Error:","")),console.error(e),!1}},getAlbumId:()=>location.pathname.replace(/\//g,""),loadBackgroundImage(){o.panelInfo.style.background=`url(${this.album.cover})`},fillInfoPanel(){const{evento:e,fechaEvento:t,lugar:a,cantidadFotos:n,cfgSliderTimer:l}=this.album,{nombre:o,web:s,tel:i,mail:c}=this.album.autor,m=function(){var e={weekday:"long",year:"numeric",month:"long",day:"numeric"},[t,a,n]=r.album.fechaEvento.split("/");return new Date([n,a,t].join("-")+"T01:01:01").toLocaleDateString("es-AR",e)}(),d=`${n} imágenes, ${(n*l/(10*l)).toFixed(1)} minutos.`,u=document.querySelector(".panel-info__album-info");u.children[0].textContent=e,u.children[1].textContent=m,u.children[2].textContent=a,u.children[3].textContent=d,u.children[5].textContent=o,u.children[6].children[0].href=s,u.children[6].children[0].textContent=s,u.children[7].children[0].href="tel:"+i,u.children[7].children[0].textContent=i,u.children[8].children[0].href="mailto:"+c,u.children[8].children[0].textContent=c},fillImageGallery(){const e=document.createDocumentFragment(),t=(e,t)=>{const a=document.createElement("img");return a.setAttribute("src",t),a.setAttribute("alt",this.album.evento),a.setAttribute("title",this.album.evento),a.setAttribute("data-image",e),a.setAttribute("data-action","Saltar a imágen"),a},{image_src:a,cfgImgType:n}=this.album;for(let l=1;l<=this.album.cantidadFotos;l++){const o=t(l,a+l+n);e.appendChild(o)}o.panelGallery.appendChild(e)},showErrorMessage(e){document.querySelector(".panel-info__album-info").innerHTML=`<h1>${e}</h1>`}};function s(e){console.log(e);let t=!1;switch(e){case"Facebook":t=`https://www.facebook.com/sharer/sharer.php?u=${location.href}`;break;case"WhatsApp":t=`whatsapp://send?text=${location.href}`}t&&window.open(t)}function i(){if(DEV_MODE)return console.error("Fullscreen is disable in DEV MODE"),!1;try{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}catch(e){}}(()=>{if(!window)return!1;window.DEV_MODE=null,window.DEV_MODE=!!["localhost","0.0.0.0","192.168"].filter((e=>new RegExp(e,"ig").test(location.href))).length})();
//# sourceMappingURL=bundle.js.map
